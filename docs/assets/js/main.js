"use strict";const button=document.querySelector(".search"),input=document.querySelector(".input"),list=document.querySelector(".list");let listFavourites=document.querySelector(".myFavourites");const imgDefault="https://via.placeholder.com/210x295/ffffff/666666/?text=TV";let favourites=[];const savedFavourites=JSON.parse(localStorage.getItem("favourites"));function search(){list.innerHTML="";const e=`http://api.tvmaze.com/search/shows?q=${input.value}`;fetch(e).then(e=>e.json()).then(e=>{for(const t of e)null===t.show.image?list.innerHTML+=`<li class="serie"><img class="photo" src="${imgDefault}"<br><h3 class="title_serie">${t.show.name}</h3></li>`:list.innerHTML+=`<li class="serie"><img class="photo" src="${t.show.image.medium}"<br><h3 class="title_serie">${t.show.name}</h3></li>`;const t=document.querySelectorAll("li");for(const e of t)e.addEventListener("click",fav)})}function fav(e){const t=e.currentTarget,s=t.querySelector(".photo").src,i=t.querySelector(".title_serie").innerHTML;t.classList.toggle("favourite"),t.classList.contains("favourite")&&favourites.push({photo:s,titleSerie:i}),listFavourites.innerHTML="";for(let e=0;e<favourites.length;e++)listFavourites.innerHTML+=`<br><li class="favourite_serie"><img class="favourite_photo" src="${favourites[e].photo}"><h3 class="favourite_title_serie">${favourites[e].titleSerie}</h3></li>`,localStorage.setItem("favourites",JSON.stringify(favourites))}function saveData(){const e=JSON.parse(localStorage.getItem("favourites"));if(""===listFavourites.innerHTML){favourites=e;for(let t=0;t<e.length;t++)listFavourites.innerHTML+=`<br><li class="favourite_serie"><img class="favourite_photo" src="${e[t].photo}"><h3 class="favourite_title_serie">${e[t].titleSerie}</h3></li>`}}savedFavourites&&saveData(),button.addEventListener("click",search);